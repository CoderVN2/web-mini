extends ../../layouts/default.pug

block main
  .container.mt-5
    .row
      //- Ảnh sản phẩm bên trái
      .col-md-6
        if product.thumbnail
          img.img-fluid.rounded(src='/' + product.thumbnail, alt=product.title,
            style="max-width:100%; max-height:250px; object-fit:contain;")
        else
          img.img-fluid.rounded(src='/images/default.jpg', alt='No image')

      //- Thông tin sản phẩm bên phải
      .col-md-6
        //- Tiêu đề
        if product.title
          h2.mb-3 #{product.title}

        //- Mô tả
        if product.description
          p.text-muted.mb-3 #{product.description}

        hr

        //- Giá gốc
        if typeof product.price !== 'undefined'
        p.mb-2
            strong Giá gốc: 
            span.text-muted.text-decoration-line-through.ml-2 $#{product.price}

        //- Giảm giá %
        if typeof product.discountPercentage !== 'undefined' && product.discountPercentage > 0
        p.mb-2
            strong Giảm giá: 
            span.text-success.ml-2 #{product.discountPercentage}%

        //- Giá đã giảm
        if typeof product.price !== 'undefined' && typeof product.discountPercentage !== 'undefined'
        - var discountedPrice = (product.price * (1 - product.discountPercentage / 100)).toFixed(2)
        p.mb-2
            strong Giá đã giảm: 
            span.text-primary.ml-2 $#{discountedPrice}

        //- Tồn kho
        if typeof product.stock !== 'undefined'
          p.mb-2
            strong Tồn kho: 
            span #{product.stock} sản phẩm

        hr
        a.btn.btn-primary.mr-2(href=`/cart/add/${product._id}`) Thêm vào giỏ
        a.btn.btn-secondary(href="/products") Quay lại
